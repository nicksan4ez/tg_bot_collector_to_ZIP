TG_as_file_bot
=================

Коротко
-------
Небольшой Telegram-бот, который принимает видео/документы от разрешённых пользователей, сохраняет их во временную папку, переименовывает (с добавлением расширения), собирает все присланные файлы и отправляет один ZIP-архив пользователю.

Файлы созданные в проекте
-------------------------
- bot.py — основной код бота
- .env — конфигурация (файл в корне, не храните в публичных репозиториях)
- .gitignore — исключения для git
- telegram_bot_media/ — временная папка (по умолчанию)

Требования
----------
- Python 3.9+
- Библиотеки: python-telegram-bot, python-dotenv (см. requirements.txt)

Установка
---------
1. Скопировать репозиторий.
2. Создать виртуальное окружение и активировать его.
3. Установить зависимости:

    pip install -r requirements.txt

Конфигурация (.env)
-------------------
Создайте или отредактируйте .env в корне проекта. Обязательные и опциональные переменные:

- BOT_TOKEN — токен Telegram-бота (обязательно)
- ALLOWED_USERS — через запятую список user_id, которым разрешён доступ (оставьте пустым, чтобы разрешить всем)
- TMP_ROOT — путь к корню временных файлов (по умолчанию: ./telegram_bot_media)
- ZIP_NAME — имя отправляемого архива (по умолчанию: Monitor.zip)
- ARCHIVE_DELAY — задержка (сек) перед созданием архива после получения последнего файла (по умолчанию: 5)

Запуск
------
1. Убедитесь, что BOT_TOKEN указан в .env.
2. Запустите бота:

    python bot.py

Поведение
---------
- Бот сохраняет присланные файлы в TMP_ROOT/user_<user_id>/
- После паузы ARCHIVE_DELAY (после последнего полученного файла) бот упаковывает все сохранённые файлы в один архив и отправляет его в тот же чат.
- Все временные файлы и папка пользователя удаляются после отправки архива.

Отладка
------
- Логи пишутся в stdout. Проверьте сообщения logger.info / logger.exception при ошибках.
- Если архив не содержит расширений — проверьте MIME-информацию и file_path в логах.

Безопасность
-----------
- Не храните BOT_TOKEN в публичных репозиториях. .gitignore уже настроен для исключения .env и временных директорий.

Лицензия
--------
MIT (по умолчанию) — при необходимости замените.

Контакты
--------
Если нужно — могу помочь с доработками: контроль коллизий имён, прогресс загрузки, лимиты размера и т.п.

